#!/bin/bash
set -euo pipefail

if ! command -v fish >/dev/null 2>&1; then
    echo "fish not found; skipping Fisher setup"
    exit 0
fi

if ! command -v curl >/dev/null 2>&1; then
    echo "curl not found; skipping Fisher setup"
    exit 0
fi

if ! fish -c 'functions -q fisher'; then
    echo "Installing Fisher..."
    fish -c 'curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source; fisher install jorgebucaran/fisher'
fi

plugins_file="$HOME/.config/fish/fish_plugins"
if [[ -f "$plugins_file" ]]; then
    echo "Installing Fish plugins from $plugins_file..."
    fish -c 'fisher update'
else
    echo "No fish_plugins file found at $plugins_file"
fi

echo "Fisher setup complete"
